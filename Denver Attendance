USE [ACVSUJournal_00010021];
GO
SET NOCOUNT ON;

SELECT
  D.ObjectID            AS DoorObjectID,
  D.Name                AS DoorName,
  C.Name                AS [Clearance Name],       -- strictly Clearance.Name
  C.FriendlyName        AS [Clearance FriendlyName],
  C.Description         AS [Clearance Description],
  D.GUID                AS DoorGUID,
  D.ControllerID        AS ControllerID,
  C.LastModifiedTime    AS [Last Modified Time]
FROM ACVSCore.Access.Door D
INNER JOIN ACVSCore.Access.Clearance C
  ON C.ObjectID = D.ObjectID          -- direct mapping you confirmed
ORDER BY D.Name, C.LastModifiedTime DESC;
GO







USE [ACVSUJournal_00010021];
GO
SET NOCOUNT ON;

SELECT
  D.ObjectID            AS DoorObjectID,
  D.Name                AS DoorName,
  C.Name                AS [Clearance Name],
  C.FriendlyName        AS [Clearance FriendlyName],
  C.Description         AS [Clearance Description],
  D.GUID                AS DoorGUID,
  D.ControllerID        AS ControllerID,
  C.LastModifiedTime    AS [Last Modified Time]
FROM ACVSCore.Access.Door D
OUTER APPLY (
  SELECT TOP(1) *
  FROM ACVSCore.Access.Clearance C2
  WHERE C2.ObjectID = D.ObjectID
  ORDER BY C2.LastModifiedTime DESC
) C
ORDER BY D.Name;
GO






USE [ACVSUJournal_00010021];
GO
SET NOCOUNT ON;

SELECT
  D.ObjectID            AS DoorObjectID,
  D.Name                AS DoorName,
  C.Name                AS [Clearance Name],
  C.FriendlyName        AS [Clearance FriendlyName],
  C.Description         AS [Clearance Description],
  D.GUID                AS DoorGUID,
  D.ControllerID        AS ControllerID,
  C.LastModifiedTime    AS [Last Modified Time]
FROM ACVSCore.Access.Door D
INNER JOIN ACVSCore.Access.Clearance C
  ON C.ObjectID = D.ObjectID
WHERE
  C.Name LIKE '%Restric%'       -- matches "Restricted", "Restrict", etc.
  OR C.FriendlyName LIKE '%Restric%'
  OR C.Description LIKE '%Restric%'
ORDER BY D.Name, C.LastModifiedTime DESC;
GO
















Good catch i have review one issue 
update below query


USE [ACVSUJournal_00010021];
GO
SET NOCOUNT ON;

SELECT
  D.ObjectID                      AS DoorObjectID,
  D.Name                          AS DoorName,
  D.GUID                          AS DoorGUID,
  D.ControllerID                  AS ControllerID,

  ISNULL(agg.ClearanceCount,0)    AS [Clearance Count],
  agg.ClearanceNames              AS [Clearance (Name)],
  agg.ClearanceFriendlyNames      AS [Clearance (FriendlyName)],
  agg.ClearanceDescriptions       AS [Clearance Descriptions],
  agg.LatestClearanceTime         AS [Last Modified Time],
  COALESCE(P.Name, CAST(agg.LastModifiedByID AS NVARCHAR(30))) AS [Last Modified By]

FROM ACVSCore.Access.Door D

OUTER APPLY (
  SELECT
    COUNT(*) AS ClearanceCount,

    -- concatenated Clearance.Name (your primary "clearance details")
    STUFF((
      SELECT ', ' + ISNULL(C2.Name,'')
      FROM ACVSCore.Access.Clearance C2
      WHERE C2.ObjectID = D.ObjectID
      FOR XML PATH(''), TYPE
    ).value('.', 'NVARCHAR(MAX)'), 1, 2, '') AS ClearanceNames,

    -- concatenated Clearance.FriendlyName (you indicated FriendlyName is important)
    STUFF((
      SELECT ', ' + ISNULL(C2.FriendlyName,'')
      FROM ACVSCore.Access.Clearance C2
      WHERE C2.ObjectID = D.ObjectID
      FOR XML PATH(''), TYPE
    ).value('.', 'NVARCHAR(MAX)'), 1, 2, '') AS ClearanceFriendlyNames,

    -- concatenated Clearance.Description (approver details)
    STUFF((
      SELECT '; ' + ISNULL(C2.Description,'')
      FROM ACVSCore.Access.Clearance C2
      WHERE C2.ObjectID = D.ObjectID
      FOR XML PATH(''), TYPE
    ).value('.', 'NVARCHAR(MAX)'), 1, 2, '') AS ClearanceDescriptions,

    -- latest LastModifiedTime among clearances for this door
    (SELECT MAX(C3.LastModifiedTime)
     FROM ACVSCore.Access.Clearance C3
     WHERE C3.ObjectID = D.ObjectID
    ) AS LatestClearanceTime,

    -- LastModifiedByID from the most recently modified clearance for this door
    (SELECT TOP(1) C4.LastModifiedByID
     FROM ACVSCore.Access.Clearance C4
     WHERE C4.ObjectID = D.ObjectID
     ORDER BY C4.LastModifiedTime DESC
    ) AS LastModifiedByID

) agg

LEFT JOIN ACVSCore.Access.Personnel P
  ON P.ObjectID = agg.LastModifiedByID

ORDER BY D.Name;
GO




This Query retun all Global Door Details and its fine 
now we need to join Query like 

currently above Query gave me outPut like ..


DoorObjectID	DoorName	DoorGUID	ControllerID	Clearance Count	Clearance (Name)	Clearance (FriendlyName)	Clearance Descriptions	Last Modified Time

and its fine...
to find Restricted door list 


select * from ACVSCore.Access.Clearance

Using this Query we got column like ..

ObjectID	Name	Description	GUID	ClassType	Protected	PartitionID	LastModifiedTime	LastModifiedByID	ActivationDate	ExpirationDate	Custom	Template	UseActivationDate	UseExpirationDate	PersonnelID	FriendlyName	FriendlyDescription	AssignViaAccessMgmtPortalOnly	ExpiringClearancePerPerson	OneDoorPerClearance	ApprovalRuleID	ReviewSchedule	NextReviewDate	ReviewerComment	ReviewRuleID	LastReviewedBy	LastReviewDate	ApproversSameAsReviewers	HasApprovalRule	HasReviewerRule	RequiresManagersApproval

We got above Column 
here ObjectID GUID is same for all 
make a Query which is display output liike 
ObjectID  DoorName  Name( For identy door is restricted or not)  FriendlyName , Description,  DoorGUID  ControllerID Last Modified Time


we join both query perfectly and give me correct Query carefully ....







