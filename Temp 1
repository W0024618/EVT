# qa_check.py
import csv, os
from collections import Counter

CSV = "swipe_results.csv"
IMG_DIR = "images"

def main():
    missing_images = []
    count = 0
    cards = Counter()
    with open(CSV, newline="", encoding="utf-8") as f:
        reader = csv.DictReader(f)
        for r in reader:
            count += 1
            cards[r.get("CardNumber") or "UNKNOWN"] += 1
            imgpath = r.get("ImageBuffer")  # our script replaced binary with path
            if imgpath:
                if not os.path.exists(imgpath):
                    missing_images.append((r.get("LocaleMessageTime"), r.get("EmployeeID"), imgpath))
            else:
                missing_images.append((r.get("LocaleMessageTime"), r.get("EmployeeID"), None))
    print(f"Total rows: {count}")
    print(f"Unique cards: {len(cards)}; top 10 cards: {cards.most_common(10)}")
    print(f"Missing images count: {len(missing_images)}")
    if missing_images:
        print("Sample missing images (time, emp, path):")
        for s in missing_images[:10]:
            print(s)

if __name__ == '__main__':
    main()









.\.venv\Scripts\Activate.ps1
python qa_check.py












(.venv) PS C:\projects\yolo_project> python fetch_swipes.py --region apac  --start 2025-10-20 --end 2025-10-23 --location "Pune" --filter ADMIT
Done. Rows exported: 22020. CSV: swipe_results.csv. Images dir: images
(.venv) PS C:\projects\yolo_project>
